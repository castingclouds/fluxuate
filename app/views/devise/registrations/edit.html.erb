<div class="mx-auto">
  <div class="p-[25px] bg-white dark:bg-gray-800 rounded-xl shadow">
  <h2 class="text-2xl font-bold text-center text-gray-900 dark:text-white mb-6">Profile Settings</h2>
  <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, class: 'space-y-6' }) do |f| %>
    <%= render "devise/shared/error_messages", resource: resource %>
    <div>
      <%= f.label :name, class: 'block text-sm font-medium text-gray-700 dark:text-gray-200' %>
      <div class="mt-1">
        <%= f.text_field :name, autofocus: true, autocomplete: "name", required: true, class: 'appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm' %>
      </div>
    </div>
    <div>
      <%= f.label :email, class: 'block text-sm font-medium text-gray-700 dark:text-gray-200' %>
      <div class="mt-1">
        <%= f.email_field :email, autofocus: true, autocomplete: "email", class: 'appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm' %>
      </div>
      <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
        <div class="text-sm text-yellow-600 bg-yellow-50 dark:bg-yellow-900/30 p-3 rounded-md mt-2">
          Currently waiting confirmation for: <span class="font-medium"><%= resource.unconfirmed_email %></span>
        </div>
      <% end %>
    </div>
    <div>
      <%= f.label :current_password, 'Current password', class: 'block text-sm font-medium text-gray-700 dark:text-gray-200' %>
      <div class="mt-1">
        <%= f.password_field :current_password, autocomplete: "current-password", required: true, class: 'appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm' %>
      </div>
      <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Verify your current password to save changes.</p>
    </div>
    <div>
      <%= f.label :password, 'New password', class: 'block text-sm font-medium text-gray-700 dark:text-gray-200' %>
      <div class="mt-1">
        <%= f.password_field :password, autocomplete: "new-password", class: 'appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm' %>
      </div>
      <% if @minimum_password_length %>
        <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">
          (<%= @minimum_password_length %> characters minimum)
        </p>
      <% end %>
    </div>
    <div>
      <%= f.label :password_confirmation, 'Confirm new password', class: 'block text-sm font-medium text-gray-700 dark:text-gray-200' %>
      <div class="mt-1">
        <%= f.password_field :password_confirmation, autocomplete: "new-password", class: 'appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 dark:bg-gray-800 dark:text-gray-100 dark:placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm' %>
      </div>
    </div>

    <div class="flex justify-end space-x-2 pt-2">
      <%= link_to "Cancel", root_path, class: 'bg-white dark:bg-gray-800 dark:text-gray-200 py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 dark:hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500' %>
      <%= f.submit "Save changes", class: 'inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 dark:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500' %>
    </div>
  <% end %>
  <div class="mt-10 border-t border-gray-200 pt-6">
    <div class="bg-red-50 dark:bg-red-900/30 rounded-lg p-6">
      <div class="flex">
        <div class="flex-shrink-0">
          <svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
          </svg>
        </div>
        <div class="ml-3 text-gray-700 dark:text-gray-200">
          <h3 class="text-sm font-medium text-red-800">Danger Zone</h3>
          <div class="mt-2 text-sm text-red-700">
            <p>Once you delete your account, there is no going back. Please be certain.</p>
          </div>
          <div class="mt-4">
            <button type="button" 
                    onclick="document.getElementById('delete-account-form').classList.toggle('hidden')" 
                    class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
              Delete account
            </button>
          </div>
          <div id="delete-account-form" class="hidden mt-4 p-4 bg-white rounded-md border border-gray-200">
            <p class="text-sm text-gray-700 mb-4">Are you sure you want to delete your account? All of your data will be permanently removed. This action cannot be undone.</p>
            <%= button_to "Delete my account", 
                          registration_path(resource_name), 
                          data: { confirm: "Are you sure? This cannot be undone." }, 
                          method: :delete, 
                          class: 'inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500' %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
